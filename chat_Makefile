CC = gcc
CFLAGS = -Wall -Wextra -Werror
SRC_DIR = .
LIBFT_DIR = libft
BUILD_DIR = .
TARGET = libftprintf.a

# List all source files in the current directory
SRC_FILES = ./ft_printf.c

# List all source files in the libft directory
LIBFT_FILES = $(wildcard $(LIBFT_DIR)/*.c)

# Create a list of object files for each source file
OBJ_FILES = $(patsubst $(SRC_DIR)/%.c, $(BUILD_DIR)/%.o, $(SRC_FILES))
LIBFT_OBJ_FILES = $(patsubst $(LIBFT_DIR)/%.c, $(BUILD_DIR)/%.o, $(LIBFT_FILES))

# Default target
all: $(TARGET)

# Rule to build the target static library
$(TARGET): $(OBJ_FILES) $(LIBFT_OBJ_FILES)
	ar rcs $@ $^

# Rule to build object files for the source files in the current directory
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.c | $(BUILD_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

# Rule to build object files for the source files in the libft directory
$(BUILD_DIR)/%.o: $(LIBFT_DIR)/%.c | $(BUILD_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

# Rule to create the build directory
$(BUILD_DIR):
	mkdir -p $(BUILD_DIR)

# Clean rule
clean:

# Distclean rule
distclean: clean
	rm -f $(TARGET)

.PHONY: all clean distclean
